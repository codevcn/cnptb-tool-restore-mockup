<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>Canvas Dynamic Font Demo</title>
    <style>
      body {
        margin: 0;
        padding: 40px;
        background: #f5f5f5;
        font-family: Arial, sans-serif;
      }

      canvas {
        background: #ffffff;
        border: 1px solid #ccc;
      }
    </style>
  </head>
  <body>
    <canvas id="canvas" width="600" height="200"></canvas>

    <script>
      const canvas = document.getElementById("canvas")
      const ctx = canvas.getContext("2d")

      // Kích thước hình chữ nhật
      const rectW = 260
      const rectH = 32

      // Vị trí góc trên-trái hình chữ nhật
      const rectX = 0
      const rectY = 0

      // Vẽ hình chữ nhật
      ctx.strokeStyle = "#000"
      ctx.lineWidth = 2
      ctx.strokeRect(0, 0, rectW, rectH)

      // Tính tâm hình chữ nhật (giao 2 đường chéo)
      const centerX = rectX + rectW / 2
      const centerY = rectY + rectH / 2

      // Vẽ chấm đỏ 5x5 tại tâm
      const dotSize = 5
      ctx.fillStyle = "red"
      ctx.fillRect(centerX - dotSize / 2, centerY - dotSize / 2, dotSize, dotSize)

      // Default styles (giả lập)
      const elementDefaultStyles = {
        text: {
          fontSize: 32,
        },
      }

      // Element demo (bạn có thể chỉnh thoải mái)
      const element = {
        content: "Hello Canvas!",
        fontSize: 40, // comment dòng này để test fallback
        fontWeight: 600, // 400 nếu không set
        fontFamily: "Arial",
        textColor: "#1f2937",
      }

      // ===== Code bạn đưa =====
      const fontSize = element.fontSize || elementDefaultStyles.text.fontSize

      const fontWeight = element.fontWeight || 400

      const fontFamily = element.fontFamily || "Arial"

      ctx.font = `${fontWeight} ${fontSize}px ${fontFamily}`
      ctx.fillStyle = element.textColor || "#000000"
      ctx.textBaseline = "middle" // Align "start point to draw text" to center
      ctx.textAlign = "center"

      ctx.translate(130, 18) // Dịch chuyển vị trí vẽ
      
      ctx.scale(4, 4) // Đảm bảo tỉ lệ đúng
      ctx.rotate((90 * Math.PI) / 180) // Không xoay

      // Draw text
      ctx.fillText(element.content, 0, 0)
    </script>
  </body>
</html>
